# 网费说明

一年以来，在付出共 155.29 元的代价下，我发现了校园网网费价格的规律。

## 省流：结论

最小二乘法拟合我的 6 条网费数据得到网费价格为 0.6120 元/GB。公告里的数值 0.6 元/G 应该是保留到了1位有效数字。

## 方法与讨论

**表1：2024年部分月份计费情况**[^1]

| 日期 date  | 流量计费 fee（元） | 使用流量 flow (MB) |
| :--------- | :----------------- | :----------------- |
| 2024年1月  | ¥2.28              | 126681.830         |
| 2024年3月  | ¥75.84             | 249790.340         |
| 2024年6月  | ¥12.32             | 143551.109         |
| 2024年7月  | ¥18.16             | 153223.551         |
| 2024年9月  | ¥22.07             | 159762.465         |
| 2024年10月 | ¥24.62             | 164032.484         |

学校的通知[^2]提到，前120G免费，后续超出部分的价格是 p = 0.6元/G。
也就是说流量计费公式可以表示为

$$
\text{cost} = p (\text{flow}_{G} - 120)
$$

其中 $\text{cost}$ 表示流量计费， $p$ 表示每 GB 流量价格， $\text{flow}_{G}$ 表示以 GB 为单位的流量。自然而然地，带入 GB 与 MB 的换算公式

$$
\text{flow}_{G} = \text{flow} / 1024
$$

计算得到

**表2：超额流量计算结果**

| 日期       | 使用流量 flow (MB) | 超额流量 overflow (GB) |
| :--------- | -----------------: | ---------------------: |
| 2024年1月  |         126681.830 |                   3.71 |
| 2024年3月  |         249790.340 |                 123.94 |
| 2024年6月  |         143551.109 |                  20.19 |
| 2024年7月  |         153223.551 |                  29.63 |
| 2024年9月  |         159762.465 |                  36.02 |
| 2024年10月 |         164032.484 |                  40.19 |

然后再带入流量计费公式得到

**表3：理论网费与实际网费对比**

| 超额流量 overflow (GB) | 流量计费 fee（元） | 理论费用 fee'（元） | 计费误差 |
| ---------------------: | -----------------: | ------------------: | :------: |
|                   3.71 |              ¥2.28 |               ¥2.23 | (¥0.05)  |
|                 123.94 |             ¥75.84 |              ¥74.36 | (¥1.48)  |
|                  20.19 |             ¥12.32 |              ¥12.11 | (¥0.21)  |
|                  29.63 |             ¥18.16 |              ¥17.78 | (¥0.38)  |
|                  36.02 |             ¥22.07 |              ¥21.61 | (¥0.46)  |
|                  40.19 |             ¥24.62 |              ¥24.11 | (¥0.51)  |

表中计费误差表示理论费用与真实费用的差。不难发现，理论费用总比真实费用要低，且误差绝对值随流量增加而增大。我猜测，价格系数可能比 0.6 元/G 更大。

为了验证这个猜测，我们自行拟合价格系数，使用最小二乘法拟合目标函数

$$
fee = p' \times \text{overflow}
$$

计算得到 $p' = 0.6120$ ，约为 p = 0.6 元/G 的 1.02 倍。

使用 $ p' $ 计算的网费与真实费用对比如下：


**表3：修正的理论网费与实际网费对比**

| 超额流量 overflow (GB) | 流量计费 fee（元） | 理论费用 fee''（元） | 计费误差 |
| ---------------------: | -----------------: | -------------------: | :------: |
|                   3.71 |              ¥2.28 |                ¥2.27 | (¥0.01)  |
|                 123.94 |             ¥75.84 |               ¥75.85 |  ¥0.01   |
|                  20.19 |             ¥12.32 |               ¥12.36 |  ¥0.04   |
|                  29.63 |             ¥18.16 |               ¥18.14 | (¥0.02)  |
|                  36.02 |             ¥22.07 |               ¥22.04 | (¥0.03)  |
|                  40.19 |             ¥24.62 |               ¥24.60 | (¥0.02)  |

从误差可以看出，拟合效果很好。我觉得绝对值误差控制在 0.1 元以下就足够了。

[^1]: 该表格来自 http://202.204.60.7:8080/nav_monthPay
[^2]: https://mp.weixin.qq.com/s/jCoyTvUAFcYFUgV4mdVj-g
